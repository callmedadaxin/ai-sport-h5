import{_ as k,o as g,c as o,a as s,l as p,h as l,F as v,r as h,p as m,m as f,f as b,e as i,g as a,q as y}from"./index-COHSjGpk.js";const C={class:"page-wrap works"},w={class:"nav"},x={class:"user-info"},A={class:"user-desc"},B={key:0,class:"section"},I=["src"],U={key:1,class:"gen-avatar placeholder"},F={class:"gen-info"},N={class:"gen-title"},S={class:"progress-bar"},T={class:"section"},V={class:"section-title"},W=["src"],$={class:"work-info"},q={class:"work-title"},z={class:"work-time"},D=["onClick"],E={__name:"Works",setup(L){const d=b(),c=i([]),n=i([]),u=i(0);function _(){f.list().then(r=>{c.value=r.generating||[],n.value=r.done||[],u.value=r.totalCount??n.value.length}).catch(()=>{})}return g(_),(r,e)=>(a(),o("div",C,[s("header",w,[s("button",{class:"back",onClick:e[0]||(e[0]=t=>p(d).back())},"‹"),e[1]||(e[1]=s("h1",{class:"title"},"作品中心",-1))]),s("div",x,[e[2]||(e[2]=s("h2",{class:"user-title"},"安徽运动达人",-1)),s("p",A,"已累计为家乡代言 "+l(u.value)+" 次",1)]),c.value.length?(a(),o("section",B,[s("div",{class:"section-head"},[e[3]||(e[3]=s("h3",{class:"section-title"},"正在生成中",-1)),s("button",{type:"button",class:"refresh",onClick:_},"刷新进度")]),(a(!0),o(v,null,h(c.value,t=>(a(),o("div",{key:t.taskId,class:"gen-card"},[t.avatarUrl?(a(),o("img",{key:0,src:t.avatarUrl,alt:"",class:"gen-avatar"},null,8,I)):(a(),o("div",U,"头像")),s("div",F,[s("p",N,l(t.templateTitle),1),e[4]||(e[4]=s("p",{class:"gen-desc"},"AI 正在努力合成你的数字代言...",-1)),s("div",S,[s("div",{class:"progress-fill",style:y({width:t.progress+"%"})},null,4)]),e[5]||(e[5]=s("p",{class:"gen-tip"},"制作完成后将自动保存到作品列表",-1))])]))),128))])):m("",!0),s("section",T,[s("h3",V,"我的代言库("+l(n.value.length)+")",1),(a(!0),o(v,null,h(n.value,t=>(a(),o("div",{key:t.id,class:"work-card"},[s("img",{src:t.coverUrl||"https://picsum.photos/200/150?random="+t.id,alt:"",class:"work-thumb"},null,8,W),s("div",$,[s("p",q,l(t.templateTitle),1),s("p",z,"生成于 "+l(t.completedAt),1),s("button",{class:"detail-btn",onClick:M=>p(d).push("/works/"+t.id)},"查看详情",8,D)])]))),128))])]))}},j=k(E,[["__scopeId","data-v-32bb6a99"]]);export{j as default};
